<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=()">
    <title>üé• AR –í–∏–¥–µ–æ –≤ –ö–æ–º–Ω–∞—Ç–µ</title>
    <style>
        /* ===== –°–ë–†–û–° –ò –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: white;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }
        
        /* ===== –≠–ö–†–ê–ù–´ ===== */
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 20px;
            display: none;
            flex-direction: column;
            transition: opacity 0.3s;
            overflow-y: auto;
        }
        
        .screen.active {
            display: flex;
        }
        
        /* ===== –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò ===== */
        #loadingScreen {
            background: #0a0a1a;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 1000;
        }
        
        .loader {
            text-align: center;
        }
        
        .spinner {
            width: 70px;
            height: 70px;
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-top-color: #00dbde;
            border-radius: 50%;
            animation: spin 1.5s linear infinite;
            margin: 0 auto 25px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .progress-bar {
            width: 200px;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin: 20px auto;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00dbde, #fc00ff);
            width: 0%;
            transition: width 0.3s;
        }
        
        /* ===== –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù ===== */
        .menu-content {
            max-width: 500px;
            margin: 0 auto;
            width: 100%;
            padding: 20px;
            text-align: center;
        }
        
        h1 {
            font-size: 32px;
            margin-bottom: 15px;
            background: linear-gradient(90deg, #00dbde, #fc00ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 800;
        }
        
        .subtitle {
            color: #a0a0d0;
            margin-bottom: 40px;
            line-height: 1.5;
            font-size: 16px;
            opacity: 0.9;
        }
        
        /* ===== –ö–ù–û–ü–ö–ò ===== */
        .btn {
            display: block;
            width: 100%;
            padding: 22px;
            margin: 15px 0;
            border: none;
            border-radius: 18px;
            font-size: 19px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .btn:active {
            transform: scale(0.97);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.08);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ff416c, #ff4b2b);
            color: white;
            box-shadow: 0 10px 30px rgba(255, 65, 108, 0.4);
        }
        
        .btn-info {
            background: linear-gradient(135deg, #00dbde, #0093e9);
            color: white;
        }
        
        .icon {
            display: inline-block;
            margin-right: 12px;
            font-size: 22px;
            vertical-align: middle;
        }
        
        /* ===== –ó–û–ù–ê –ó–ê–ì–†–£–ó–ö–ò ===== */
        .upload-area {
            border: 3px dashed #00dbde;
            border-radius: 25px;
            padding: 50px 20px;
            text-align: center;
            margin: 30px 0;
            background: rgba(0, 219, 222, 0.05);
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .upload-area.dragover {
            background: rgba(0, 219, 222, 0.15);
            border-color: #fc00ff;
            transform: scale(1.02);
        }
        
        .upload-icon {
            font-size: 60px;
            margin-bottom: 20px;
            display: block;
            color: #00dbde;
        }
        
        .file-input {
            display: none;
        }
        
        .video-preview {
            margin-top: 30px;
            display: none;
        }
        
        .video-preview.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        video {
            width: 100%;
            border-radius: 15px;
            margin: 20px 0;
            background: #000;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
        }
        
        /* ===== –ò–ù–§–û–†–ú–ê–¶–ò–û–ù–ù–´–ï –ë–õ–û–ö–ò ===== */
        .info-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 25px;
            margin: 15px 0;
            border-left: 5px solid #00dbde;
            backdrop-filter: blur(10px);
        }
        
        .info-card h3 {
            color: #00dbde;
            margin-bottom: 12px;
            font-size: 20px;
        }
        
        .info-card p {
            color: #b0b0e0;
            line-height: 1.6;
            font-size: 15px;
        }
        
        /* ===== AR –≠–ö–†–ê–ù ===== */
        #arScreen {
            padding: 0;
            background: #000;
        }
        
        #arCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .ar-controls {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            background: rgba(0, 0, 0, 0.85);
            padding: 20px 25px;
            border-radius: 35px;
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            z-index: 100;
        }
        
        .control-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.12);
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .control-btn:active {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(0.92);
        }
        
        /* ===== –ö–ù–û–ü–ö–ò –ù–ê–ó–ê–î ===== */
        .back-btn {
            position: absolute;
            top: 25px;
            left: 25px;
            padding: 14px 25px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 17px;
            cursor: pointer;
            z-index: 10;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .back-btn:active {
            transform: scale(0.95);
        }
        
        /* ===== –°–û–û–ë–©–ï–ù–ò–Ø ===== */
        #message {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 18px 30px;
            border-radius: 15px;
            z-index: 2000;
            display: none;
            text-align: center;
            max-width: 90%;
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            font-weight: 500;
        }
        
        #message.active {
            display: block;
            animation: slideIn 0.3s, fadeOut 3s 2.7s;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-50%) translateY(-30px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        
        @keyframes fadeOut {
            to { opacity: 0; }
        }
        
        /* ===== –°–¢–ê–¢–£–° –ë–ê–† ===== */
        .status-bar {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 12px 25px;
            border-radius: 25px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 219, 222, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #00ff00;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* ===== –ú–û–ë–ò–õ–¨–ù–ê–Ø –ê–î–ê–ü–¢–ê–¶–ò–Ø ===== */
        @media (max-width: 768px) {
            .screen {
                padding: 15px;
            }
            
            h1 {
                font-size: 28px;
            }
            
            .btn {
                padding: 20px;
                font-size: 18px;
                margin: 12px 0;
            }
            
            .ar-controls {
                bottom: 20px;
                padding: 15px 20px;
                gap: 12px;
            }
            
            .control-btn {
                width: 55px;
                height: 55px;
                font-size: 22px;
            }
            
            .back-btn {
                top: 20px;
                left: 20px;
                padding: 12px 20px;
                font-size: 16px;
            }
            
            .status-bar {
                top: 20px;
                padding: 10px 20px;
                font-size: 14px;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 24px;
            }
            
            .btn {
                padding: 18px;
                font-size: 16px;
            }
            
            .upload-area {
                padding: 40px 15px;
            }
            
            .upload-icon {
                font-size: 50px;
            }
            
            .ar-controls {
                width: 95%;
                justify-content: space-around;
                border-radius: 25px;
            }
        }
        
        /* ===== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –≠–§–§–ï–ö–¢–´ ===== */
        .glow {
            text-shadow: 0 0 20px rgba(0, 219, 222, 0.5);
        }
        
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: scale(0);
            animation: ripple 0.6s linear;
        }
        
        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
        
        /* ===== –ü–û–õ–û–°–ö–ê –ü–†–û–ì–†–ï–°–°–ê –ì–†–û–ú–ö–û–°–¢–ò ===== */
        .volume-slider {
            position: absolute;
            right: 30px;
            bottom: 40px;
            width: 150px;
            transform: rotate(-90deg);
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 20px;
            backdrop-filter: blur(20px);
            display: none;
        }
        
        .volume-slider.active {
            display: block;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #00dbde;
            cursor: pointer;
            box-shadow: 0 0 15px rgba(0, 219, 222, 0.8);
        }
    </style>
</head>
<body>
    <!-- ===== –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò ===== -->
    <div id="loadingScreen" class="screen active">
        <div class="loader">
            <div class="spinner"></div>
            <h1 class="glow">AR –í–∏–¥–µ–æ –ö–æ–º–Ω–∞—Ç–∞</h1>
            <p class="subtitle">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...</p>
            <div class="progress-bar">
                <div class="progress-fill" id="loadingProgress"></div>
            </div>
            <p style="margin-top: 20px; color: #888; font-size: 14px;">
                –î–ª—è —Ä–∞–±–æ—Ç—ã AR —Ç—Ä–µ–±—É–µ—Ç—Å—è HTTPS –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã
            </p>
        </div>
    </div>
    
    <!-- ===== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ===== -->
    <div id="mainScreen" class="screen">
        <div class="menu-content">
            <h1><span class="icon">üé•</span> AR –í–∏–¥–µ–æ –≤ –ö–æ–º–Ω–∞—Ç–µ</h1>
            <p class="subtitle">–ó–∞–≥—Ä—É–∂–∞–π—Ç–µ –≤–∏–¥–µ–æ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ —Ä–∞–∑–º–µ—â–∞–π—Ç–µ –µ–≥–æ –≤ –¥–æ–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –≤ –≤–∞—à–µ–π –∫–æ–º–Ω–∞—Ç–µ. –ò–∑–º–µ–Ω—è–π—Ç–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ, —Ä–∞–∑–º–µ—Ä –∏ —Å–º–æ—Ç—Ä–∏—Ç–µ —Å–æ –∑–≤—É–∫–æ–º!</p>
            
            <button id="startAR" class="btn btn-primary">
                <span class="icon">üöÄ</span> –ó–∞–ø—É—Å—Ç–∏—Ç—å AR —Ä–µ–∂–∏–º
            </button>
            
            <button id="uploadVideo" class="btn btn-secondary">
                <span class="icon">üìÅ</span> –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞
            </button>
            
            <button id="showInstructions" class="btn btn-secondary">
                <span class="icon">‚ùì</span> –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
            </button>
            
            <div class="info-card" style="margin-top: 30px;">
                <h3><span class="icon">üì±</span> –¢–µ–∫—É—â–µ–µ –≤–∏–¥–µ–æ:</h3>
                <p id="currentVideoName">–í–∏–¥–µ–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ</p>
                <p id="videoInfo" style="color: #888; font-size: 14px; margin-top: 10px;">
                    –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∏–¥–µ–æ —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å AR
                </p>
            </div>
            
            <div class="info-card" style="background: rgba(255, 107, 107, 0.1); border-left-color: #ff6b6b;">
                <h3><span class="icon">‚ö†Ô∏è</span> –í–∞–∂–Ω–æ –∑–Ω–∞—Ç—å:</h3>
                <p>‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Chrome –∏–ª–∏ Edge –Ω–∞ Android<br>
                   ‚Ä¢ –¢—Ä–µ–±—É–µ—Ç—Å—è HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ<br>
                   ‚Ä¢ –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ<br>
                   ‚Ä¢ –î–ª—è —Ä–∞–±–æ—Ç—ã –Ω—É–∂–Ω–∞ –ø–ª–æ—Å–∫–∞—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å</p>
            </div>
        </div>
    </div>
    
    <!-- ===== –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò –í–ò–î–ï–û ===== -->
    <div id="uploadScreen" class="screen">
        <button class="back-btn" id="backFromUpload">
            <span class="icon">‚Üê</span> –ù–∞–∑–∞–¥
        </button>
        
        <div class="menu-content">
            <h1><span class="icon">üìÅ</span> –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ</h1>
            <p class="subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∏–¥–µ–æ —Ñ–∞–π–ª —Å –≤–∞—à–µ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤ AR</p>
            
            <div class="upload-area" id="dropArea">
                <div class="upload-icon">üìπ</div>
                <h3 style="color: #00dbde; margin-bottom: 10px;">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ –≤–∏–¥–µ–æ</h3>
                <p style="color: #a0a0d0; margin: 15px 0;">–ò–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª –≤ —ç—Ç—É –æ–±–ª–∞—Å—Ç—å</p>
                <p style="font-size: 14px; color: #7a7ac8; background: rgba(0,0,0,0.3); padding: 8px 15px; border-radius: 20px; display: inline-block;">
                    MP4 ‚Ä¢ MOV ‚Ä¢ WebM ‚Ä¢ –î–æ 100MB
                </p>
            </div>
            
            <input type="file" id="videoInput" class="file-input" accept="video/*" capture="environment">
            
            <div class="video-preview" id="videoPreview">
                <h3 style="color: #00dbde; margin-bottom: 15px;"><span class="icon">üëÅÔ∏è</span> –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤–∏–¥–µ–æ:</h3>
                <video id="previewVideo" controls playsinline></video>
                <button id="useThisVideo" class="btn btn-primary">
                    <span class="icon">‚úÖ</span> –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –≤–∏–¥–µ–æ –≤ AR
                </button>
            </div>
            
            <div class="info-card" style="margin-top: 25px;">
                <h3><span class="icon">üí°</span> –°–æ–≤–µ—Ç—ã:</h3>
                <p>‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞<br>
                   ‚Ä¢ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 10-60 —Å–µ–∫—É–Ω–¥<br>
                   ‚Ä¢ –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–µ–Ω–µ–µ 100MB<br>
                   ‚Ä¢ –î–ª—è AR –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥—è—Ç –≤–∏–¥–µ–æ —Å —á—ë—Ç–∫–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏</p>
            </div>
        </div>
    </div>
    
    <!-- ===== –≠–ö–†–ê–ù –ò–ù–°–¢–†–£–ö–¶–ò–ô ===== -->
    <div id="instructionsScreen" class="screen">
        <button class="back-btn" id="backFromInstructions">
            <span class="icon">‚Üê</span> –ù–∞–∑–∞–¥
        </button>
        
        <div class="menu-content" style="text-align: left;">
            <h1><span class="icon">üìñ</span> –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h1>
            
            <div class="info-card">
                <h3><span class="icon">1Ô∏è‚É£</span> –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞</h3>
                <p>‚Ä¢ –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ Chrome/Edge<br>
                   ‚Ä¢ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ<br>
                   ‚Ä¢ –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –≤–∏–¥–µ–æ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –∏–ª–∏ —Å–Ω–∏–º–∏—Ç–µ –Ω–æ–≤–æ–µ</p>
            </div>
            
            <div class="info-card">
                <h3><span class="icon">2Ô∏è‚É£</span> –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ</h3>
                <p>‚Ä¢ –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞"<br>
                   ‚Ä¢ –í—ã–±–µ—Ä–∏—Ç–µ –≤–∏–¥–µ–æ –∏–∑ –≥–∞–ª–µ—Ä–µ–∏ –∏–ª–∏ —Å–Ω–∏–º–∏—Ç–µ –Ω–æ–≤–æ–µ<br>
                   ‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–∏–¥–µ–æ –≤ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–µ<br>
                   ‚Ä¢ –ù–∞–∂–º–∏—Ç–µ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –≤–∏–¥–µ–æ"</p>
            </div>
            
            <div class="info-card">
                <h3><span class="icon">3Ô∏è‚É£</span> –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ AR</h3>
                <p>‚Ä¢ –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å AR —Ä–µ–∂–∏–º"<br>
                   ‚Ä¢ –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –∫–æ–≥–¥–∞ –±—Ä–∞—É–∑–µ—Ä –∑–∞–ø—Ä–æ—Å–∏—Ç<br>
                   ‚Ä¢ –ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ –ø–ª–æ—Å–∫—É—é –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å (–ø–æ–ª, —Å—Ç–æ–ª)<br>
                   ‚Ä¢ –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ—è–≤–ª–µ–Ω–∏—è —Å–µ—Ç–∫–∏</p>
            </div>
            
            <div class="info-card">
                <h3><span class="icon">4Ô∏è‚É£</span> –®–∞–≥ 4: –†–∞–∑–º–µ—â–µ–Ω–∏–µ –≤–∏–¥–µ–æ</h3>
                <p>‚Ä¢ –ö–æ—Å–Ω–∏—Ç–µ—Å—å —ç–∫—Ä–∞–Ω–∞ –≤ –Ω—É–∂–Ω–æ–º –º–µ—Å—Ç–µ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤–∏–¥–µ–æ<br>
                   ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∂–µ—Å—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:<br>
                   &nbsp;&nbsp;‚Ä¢ –û–¥–∏–Ω –ø–∞–ª–µ—Ü ‚Äì –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ<br>
                   &nbsp;&nbsp;‚Ä¢ –î–≤–∞ –ø–∞–ª—å—Ü–∞ ‚Äì –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ<br>
                   &nbsp;&nbsp;‚Ä¢ –ü–æ–≤–æ—Ä–æ—Ç –¥–≤—É–º—è –ø–∞–ª—å—Ü–∞–º–∏ ‚Äì –≤—Ä–∞—â–µ–Ω–∏–µ<br>
                   &nbsp;&nbsp;‚Ä¢ –î–≤–æ–π–Ω–æ–µ –∫–∞—Å–∞–Ω–∏–µ ‚Äì –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ/–ø–∞—É–∑–∞</p>
            </div>
            
            <div class="info-card">
                <h3><span class="icon">5Ô∏è‚É£</span> –®–∞–≥ 5: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h3>
                <p>‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è:<br>
                   &nbsp;&nbsp;‚Ä¢ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è/–ø–∞—É–∑—ã –≤–∏–¥–µ–æ<br>
                   &nbsp;&nbsp;‚Ä¢ –†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∏ –≥—Ä–æ–º–∫–æ—Å—Ç–∏<br>
                   &nbsp;&nbsp;‚Ä¢ –£–¥–∞–ª–µ–Ω–∏—è –≤–∏–¥–µ–æ –∏–∑ —Å—Ü–µ–Ω—ã<br>
                   &nbsp;&nbsp;‚Ä¢ –°–±—Ä–æ—Å–∞ –ø–æ–∑–∏—Ü–∏–∏</p>
            </div>
            
            <div class="info-card" style="background: rgba(0, 219, 222, 0.15); border-left-color: #fc00ff;">
                <h3><span class="icon">üéØ</span> –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã:</h3>
                <p>‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ö–æ—Ä–æ—à–µ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ –¥–ª—è –ª—É—á—à–µ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è AR<br>
                   ‚Ä¢ –†–∞–∑–º–µ—â–∞–π—Ç–µ –≤–∏–¥–µ–æ –Ω–∞ —Ç–µ–∫—Å—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—è—Ö<br>
                   ‚Ä¢ –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∏–¥–µ–æ –æ–±—ä–µ–∫—Ç–æ–≤<br>
                   ‚Ä¢ –†–µ–≥—É–ª—è—Ä–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å—Ü–µ–Ω—ã —á–µ—Ä–µ–∑ –º–µ–Ω—é —ç–∫—Å–ø–æ—Ä—Ç–∞</p>
            </div>
        </div>
    </div>
    
    <!-- ===== AR –≠–ö–†–ê–ù ===== -->
    <div id="arScreen" class="screen">
        <canvas id="arCanvas"></canvas>
        
        <div class="status-bar" id="arStatus">
            <div class="status-dot"></div>
            <span id="statusText">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AR...</span>
        </div>
        
        <button class="back-btn" id="backFromAR">
            <span class="icon">‚Üê</span> –í—ã–π—Ç–∏ –∏–∑ AR
        </button>
        
        <div class="ar-controls">
            <button class="control-btn" id="playPauseBtn" title="–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏/–ü–∞—É–∑–∞">
                <span class="icon">‚ñ∂Ô∏è</span>
            </button>
            <button class="control-btn" id="volumeBtn" title="–ì—Ä–æ–º–∫–æ—Å—Ç—å">
                <span class="icon">üîä</span>
            </button>
            <button class="control-btn btn-danger" id="deleteBtn" title="–£–¥–∞–ª–∏—Ç—å –≤–∏–¥–µ–æ">
                <span class="icon">üóëÔ∏è</span>
            </button>
            <button class="control-btn" id="resetBtn" title="–°–±—Ä–æ—Å–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é">
                <span class="icon">üîÑ</span>
            </button>
            <button class="control-btn btn-info" id="scaleBtn" title="–ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä">
                <span class="icon">üìê</span>
            </button>
        </div>
        
        <div class="volume-slider" id="volumeSlider">
            <input type="range" id="volumeControl" min="0" max="1" step="0.1" value="0.7">
        </div>
        
        <div style="position: absolute; bottom: 100px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.6); color: #00dbde; padding: 10px 20px; border-radius: 20px; font-size: 14px; backdrop-filter: blur(10px);">
            <span class="icon">üëÜ</span> –ö–æ—Å–Ω–∏—Ç–µ—Å—å –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤–∏–¥–µ–æ
        </div>
    </div>
    
    <!-- ===== –°–ò–°–¢–ï–ú–ê –°–û–û–ë–©–ï–ù–ò–ô ===== -->
    <div id="message"></div>

    <!-- ===== –í–ï–°–¨ JAVASCRIPT –ö–û–î ===== -->
    <script>
        // ========== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ==========
        let currentVideoFile = null;
        let currentVideoUrl = null;
        let currentVideoName = "–ù–µ –≤—ã–±—Ä–∞–Ω–æ";
        let isARActive = false;
        let isVideoPlaying = false;
        let videoVolume = 0.7;
        let touchStartTime = 0;
        let lastTouchTime = 0;
        
        // ========== –û–°–ù–û–í–ù–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ==========
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ AR Video Room –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...');
            
            // –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏
            simulateLoadingProgress();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
            setupAllEventListeners();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
            checkDeviceCompatibility();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∫–∞—Å–∞–Ω–∏—è
            setupTouchEffects();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–∏–¥–µ–æ
            updateVideoInfo();
            
            console.log('‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ');
        });
        
        // ========== –°–ò–ú–£–õ–Ø–¶–ò–Ø –ó–ê–ì–†–£–ó–ö–ò ==========
        function simulateLoadingProgress() {
            const progress = document.getElementById('loadingProgress');
            let width = 0;
            
            const interval = setInterval(() => {
                width += Math.random() * 15 + 5;
                if (width > 100) width = 100;
                progress.style.width = width + '%';
                
                if (width >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        switchScreen('mainScreen');
                        showMessage('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!', 'success');
                    }, 500);
                }
            }, 200);
        }
        
        // ========== –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –≠–ö–†–ê–ù–û–í ==========
        function switchScreen(screenId) {
            console.log('üì± –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞:', screenId);
            
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
            ['loadingScreen', 'mainScreen', 'uploadScreen', 'instructionsScreen', 'arScreen'].forEach(id => {
                const screen = document.getElementById(id);
                if (screen) screen.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —Ü–µ–ª–µ–≤–æ–π —ç–∫—Ä–∞–Ω
            const targetScreen = document.getElementById(screenId);
            if (targetScreen) {
                targetScreen.classList.add('active');
                
                // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —ç–∫—Ä–∞–Ω–æ–≤
                if (screenId === 'arScreen') {
                    startARMode();
                } else if (isARActive) {
                    stopARMode();
                }
                
                // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤ –Ω–∞—á–∞–ª–æ
                targetScreen.scrollTop = 0;
            }
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            updatePageTitle(screenId);
        }
        
        function updatePageTitle(screenId) {
            const titles = {
                'mainScreen': 'üé• AR –í–∏–¥–µ–æ –≤ –ö–æ–º–Ω–∞—Ç–µ',
                'uploadScreen': 'üìÅ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ',
                'instructionsScreen': 'üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è',
                'arScreen': 'üöÄ AR —Ä–µ–∂–∏–º'
            };
            if (titles[screenId]) {
                document.title = titles[screenId];
            }
        }
        
        // ========== –ù–ê–°–¢–†–û–ô–ö–ê –í–°–ï–• –û–ë–†–ê–ë–û–¢–ß–ò–ö–û–í ==========
        function setupAllEventListeners() {
            console.log('‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π...');
            
            // === –û–°–ù–û–í–ù–´–ï –ö–ù–û–ü–ö–ò –ù–ê–í–ò–ì–ê–¶–ò–ò ===
            document.getElementById('startAR').addEventListener('click', function(e) {
                createRippleEffect(e);
                if (!currentVideoUrl) {
                    showMessage('–°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∏–¥–µ–æ!', 'warning');
                    return;
                }
                switchScreen('arScreen');
            });
            
            document.getElementById('uploadVideo').addEventListener('click', function(e) {
                createRippleEffect(e);
                switchScreen('uploadScreen');
            });
            
            document.getElementById('showInstructions').addEventListener('click', function(e) {
                createRippleEffect(e);
                switchScreen('instructionsScreen');
            });
            
            // === –ö–ù–û–ü–ö–ò "–ù–ê–ó–ê–î" ===
            document.getElementById('backFromUpload').addEventListener('click', function(e) {
                createRippleEffect(e);
                switchScreen('mainScreen');
            });
            
            document.getElementById('backFromInstructions').addEventListener('click', function(e) {
                createRippleEffect(e);
                switchScreen('mainScreen');
            });
            
            document.getElementById('backFromAR').addEventListener('click', function(e) {
                createRippleEffect(e);
                switchScreen('mainScreen');
            });
            
            // === –ó–ê–ì–†–£–ó–ö–ê –í–ò–î–ï–û ===
            const videoInput = document.getElementById('videoInput');
            const dropArea = document.getElementById('dropArea');
            
            videoInput.addEventListener('change', handleVideoSelect);
            
            dropArea.addEventListener('click', function(e) {
                createRippleEffect(e);
                videoInput.click();
            });
            
            // Drag and Drop —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
            dropArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                dropArea.classList.add('dragover');
            });
            
            dropArea.addEventListener('dragleave', function() {
                dropArea.classList.remove('dragover');
            });
            
            dropArea.addEventListener('drop', function(e) {
                e.preventDefault();
                dropArea.classList.remove('dragover');
                
                if (e.dataTransfer.files.length > 0) {
                    handleVideoFile(e.dataTransfer.files[0]);
                }
            });
            
            // –ö–Ω–æ–ø–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ
            document.getElementById('useThisVideo').addEventListener('click', function(e) {
                createRippleEffect(e);
                if (currentVideoFile) {
                    currentVideoName = currentVideoFile.name;
                    document.getElementById('currentVideoName').textContent = currentVideoName;
                    updateVideoInfo();
                    showMessage('‚úÖ –í–∏–¥–µ–æ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ AR!', 'success');
                    switchScreen('mainScreen');
                }
            });
            
            // === AR –ö–û–ù–¢–†–û–õ–´ ===
            const playPauseBtn = document.getElementById('playPauseBtn');
            const volumeBtn = document.getElementById('volumeBtn');
            const deleteBtn = document.getElementById('deleteBtn');
            const resetBtn = document.getElementById('resetBtn');
            const scaleBtn = document.getElementById('scaleBtn');
            const volumeControl = document.getElementById('volumeControl');
            
            playPauseBtn.addEventListener('click', function(e) {
                createRippleEffect(e);
                toggleVideoPlayback();
            });
            
            volumeBtn.addEventListener('click', function(e) {
                createRippleEffect(e);
                toggleVolumeSlider();
            });
            
            deleteBtn.addEventListener('click', function(e) {
                createRippleEffect(e);
                showMessage('–í–∏–¥–µ–æ —É–¥–∞–ª–µ–Ω–æ –∏–∑ —Å—Ü–µ–Ω—ã', 'info');
            });
            
            resetBtn.addEventListener('click', function(e) {
                createRippleEffect(e);
                showMessage('–ü–æ–∑–∏—Ü–∏—è –≤–∏–¥–µ–æ —Å–±—Ä–æ—à–µ–Ω–∞', 'info');
            });
            
            scaleBtn.addEventListener('click', function(e) {
                createRippleEffect(e);
                showMessage('–†–µ–∂–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω', 'info');
            });
            
            volumeControl.addEventListener('input', function(e) {
                videoVolume = parseFloat(e.target.value);
                showMessage('–ì—Ä–æ–º–∫–æ—Å—Ç—å: ' + Math.round(videoVolume * 100) + '%', 'info');
            });
            
            // === –û–ë–†–ê–ë–û–¢–ö–ê –ö–ê–°–ê–ù–ò–ô –ù–ê AR –≠–ö–†–ê–ù–ï ===
            document.addEventListener('touchstart', handleTouchStart, { passive: false });
            document.addEventListener('touchend', handleTouchEnd, { passive: false });
            document.addEventListener('touchmove', handleTouchMove, { passive: false });
            
            console.log('‚úÖ –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
        }
        
        // ========== –û–ë–†–ê–ë–û–¢–ö–ê –í–ò–î–ï–û –§–ê–ô–õ–û–í ==========
        function handleVideoSelect(event) {
            const file = event.target.files[0];
            if (file) {
                handleVideoFile(file);
            }
        }
        
        function handleVideoFile(file) {
            console.log('üìπ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ —Ñ–∞–π–ª–∞:', file.name);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞
            if (!file.type.startsWith('video/')) {
                showMessage('‚ùå –í—ã–±–µ—Ä–∏—Ç–µ –≤–∏–¥–µ–æ —Ñ–∞–π–ª (MP4, MOV, WebM)', 'error');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
            if (file.size > 100 * 1024 * 1024) {
                showMessage('‚ùå –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π! –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 100MB', 'error');
                return;
            }
            
            currentVideoFile = file;
            
            // –°–æ–∑–¥–∞–Ω–∏–µ URL –¥–ª—è –≤–∏–¥–µ–æ
            const videoUrl = URL.createObjectURL(file);
            
            // –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ URL
            if (currentVideoUrl) {
                URL.revokeObjectURL(currentVideoUrl);
            }
            currentVideoUrl = videoUrl;
            
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
            const previewVideo = document.getElementById('previewVideo');
            const videoPreview = document.getElementById('videoPreview');
            
            previewVideo.src = videoUrl;
            previewVideo.volume = videoVolume;
            previewVideo.load();
            videoPreview.classList.add('active');
            
            // –ü–æ–∫–∞–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ
            const fileSizeMB = (file.size / (1024 * 1024)).toFixed(2);
            showMessage(`‚úÖ –í–∏–¥–µ–æ "${file.name}" –∑–∞–≥—Ä—É–∂–µ–Ω–æ (${fileSizeMB} MB)`, 'success');
            
            // –ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
            setTimeout(() => {
                previewVideo.play().catch(e => {
                    console.log('–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:', e.message);
                });
            }, 500);
        }
        
        // ========== AR –†–ï–ñ–ò–ú ==========
        function startARMode() {
            console.log('üöÄ –ó–∞–ø—É—Å–∫ AR —Ä–µ–∂–∏–º–∞...');
            isARActive = true;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ AR
            const statusText = document.getElementById('statusText');
            const statusDot = document.querySelector('.status-dot');
            
            statusText.textContent = '–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–º–µ—Ä—ã...';
            statusDot.style.background = '#ff9800';
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTPS
            if (window.location.protocol !== 'https:' && !window.location.hostname.includes('localhost')) {
                showMessage('‚ö†Ô∏è –î–ª—è —Ä–∞–±–æ—Ç—ã –∫–∞–º–µ—Ä—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ!', 'warning');
            }
            
            // –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ AR
            setTimeout(() => {
                statusText.textContent = '–ü–æ–∏—Å–∫ –ø–ª–æ—Å–∫–∏—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π...';
                statusDot.style.background = '#00dbde';
            }, 1500);
            
            setTimeout(() => {
                statusText.textContent = '–ì–æ—Ç–æ–≤–æ! –ö–æ—Å–Ω–∏—Ç–µ—Å—å —ç–∫—Ä–∞–Ω–∞ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤–∏–¥–µ–æ';
                statusDot.style.background = '#00ff00';
            }, 3000);
            
            // –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏ AR –∫–∞–Ω–≤–∞—Å–∞
            startARAnimation();
        }
        
        function stopARMode() {
            console.log('üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ AR —Ä–µ–∂–∏–º–∞');
            isARActive = false;
            
            // –°–∫—Ä—ã—Ç–∏–µ —Å–ª–∞–π–¥–µ—Ä–∞ –≥—Ä–æ–º–∫–æ—Å—Ç–∏
            document.getElementById('volumeSlider').classList.remove('active');
        }
        
        function startARAnimation() {
            const canvas = document.getElementById('arCanvas');
            const ctx = canvas.getContext('2d');
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ –∫–∞–Ω–≤–∞—Å–∞
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // –°–∏–º—É–ª—è—Ü–∏—è AR –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
            function draw() {
                if (!isARActive) return;
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // –†–∏—Å–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
                ctx.strokeStyle = 'rgba(0, 219, 222, 0.3)';
                ctx.lineWidth = 2;
                
                const gridSize = 50;
                for (let x = 0; x < canvas.width; x += gridSize) {
                    ctx.beginPath();
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x, canvas.height);
                    ctx.stroke();
                }
                
                for (let y = 0; y < canvas.height; y += gridSize) {
                    ctx.beginPath();
                    ctx.moveTo(0, y);
                    ctx.lineTo(canvas.width, y);
                    ctx.stroke();
                }
                
                // –ê–Ω–∏–º–∞—Ü–∏—è —Ç–æ—á–µ–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
                const time = Date.now() * 0.001;
                const pointCount = 15;
                
                for (let i = 0; i < pointCount; i++) {
                    const angle = time * 0.5 + i * Math.PI * 2 / pointCount;
                    const radius = 50 + Math.sin(time + i) * 30;
                    const x = canvas.width / 2 + Math.cos(angle) * radius;
                    const y = canvas.height / 2 + Math.sin(angle) * radius;
                    
                    ctx.fillStyle = `rgba(0, 219, 222, ${0.5 + Math.sin(time + i) * 0.3})`;
                    ctx.beginPath();
                    ctx.arc(x, y, 4 + Math.sin(time * 2 + i) * 2, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                requestAnimationFrame(draw);
            }
            
            draw();
        }
        
        // ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï –í–ò–î–ï–û ==========
        function toggleVideoPlayback() {
            const previewVideo = document.getElementById('previewVideo');
            const playPauseBtn = document.getElementById('playPauseBtn');
            
            if (previewVideo) {
                if (previewVideo.paused) {
                    previewVideo.play();
                    playPauseBtn.innerHTML = '<span class="icon">‚è∏Ô∏è</span>';
                    showMessage('–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ', 'info');
                } else {
                    previewVideo.pause();
                    playPauseBtn.innerHTML = '<span class="icon">‚ñ∂Ô∏è</span>';
                    showMessage('–ü–∞—É–∑–∞ –≤–∏–¥–µ–æ', 'info');
                }
            }
        }
        
        function toggleVolumeSlider() {
            const volumeSlider = document.getElementById('volumeSlider');
            volumeSlider.classList.toggle('active');
        }
        
        // ========== –û–ë–†–ê–ë–û–¢–ö–ê –ö–ê–°–ê–ù–ò–ô –ò –ñ–ï–°–¢–û–í ==========
        function handleTouchStart(e) {
            touchStartTime = Date.now();
            createRippleEffect(e);
            
            if (isARActive) {
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∂–µ—Å—Ç–æ–≤ –≤ AR —Ä–µ–∂–∏–º–µ
                if (e.touches.length === 1) {
                    // –û–¥–∏–Ω–æ—á–Ω–æ–µ –∫–∞—Å–∞–Ω–∏–µ - —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –≤–∏–¥–µ–æ
                    showMessage('–í–∏–¥–µ–æ —Ä–∞–∑–º–µ—â–µ–Ω–æ –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏', 'success');
                } else if (e.touches.length === 2) {
                    // –î–≤–∞ –ø–∞–ª—å—Ü–∞ - –Ω–∞—á–∞–ª–æ –∂–µ—Å—Ç–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è/–≤—Ä–∞—â–µ–Ω–∏—è
                    showMessage('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–≤–∞ –ø–∞–ª—å—Ü–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∏ –≤—Ä–∞—â–µ–Ω–∏—è', 'info');
                }
            }
        }
        
        function handleTouchEnd(e) {
            const touchEndTime = Date.now();
            const touchDuration = touchEndTime - touchStartTime;
            
            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–≤–æ–π–Ω–æ–≥–æ –∫–∞—Å–∞–Ω–∏—è
            const currentTime = Date.now();
            if (currentTime - lastTouchTime < 300) {
                // –î–≤–æ–π–Ω–æ–µ –∫–∞—Å–∞–Ω–∏–µ
                if (isARActive) {
                    toggleVideoPlayback();
                }
            }
            lastTouchTime = currentTime;
            
            // –î–æ–ª–≥–æ–µ –∫–∞—Å–∞–Ω–∏–µ
            if (touchDuration > 500 && e.touches.length === 0) {
                showMessage('–î–æ–ª–≥–æ–µ –∫–∞—Å–∞–Ω–∏–µ - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏', 'info');
            }
        }
        
        function handleTouchMove(e) {
            if (isARActive && e.touches.length === 2) {
                // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                e.preventDefault();
            }
        }
        
        // ========== –í–ò–ó–£–ê–õ–¨–ù–´–ï –≠–§–§–ï–ö–¢–´ ==========
        function createRippleEffect(event) {
            const btn = event.currentTarget;
            const circle = document.createElement('span');
            const rect = btn.getBoundingClientRect();
            
            const diameter = Math.max(rect.width, rect.height);
            const radius = diameter / 2;
            
            circle.style.width = circle.style.height = diameter + 'px';
            circle.style.left = (event.clientX - rect.left - radius) + 'px';
            circle.style.top = (event.clientY - rect.top - radius) + 'px';
            circle.classList.add('ripple');
            
            const ripple = btn.getElementsByClassName('ripple')[0];
            if (ripple) {
                ripple.remove();
            }
            
            btn.appendChild(circle);
        }
        
        function setupTouchEffects() {
            // –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç ripple –∫–æ –≤—Å–µ–º –∫–Ω–æ–ø–∫–∞–º
            document.querySelectorAll('.btn, .control-btn, .back-btn').forEach(btn => {
                btn.addEventListener('touchstart', createRippleEffect);
                btn.addEventListener('mousedown', createRippleEffect);
            });
        }
        
        // ========== –°–ò–°–¢–ï–ú–ê –°–û–û–ë–©–ï–ù–ò–ô ==========
        function showMessage(text, type = 'info') {
            console.log('üí¨ –°–æ–æ–±—â–µ–Ω–∏–µ:', text);
            
            const messageEl = document.getElementById('message');
            if (!messageEl) return;
            
            // –¶–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
            const colors = {
                'success': 'linear-gradient(135deg, #00b09b, #96c93d)',
                'error': 'linear-gradient(135deg, #ff416c, #ff4b2b)',
                'warning': 'linear-gradient(135deg, #f7971e, #ffd200)',
                'info': 'linear-gradient(135deg, #00dbde, #0093e9)'
            };
            
            messageEl.textContent = text;
            messageEl.style.background = colors[type] || colors.info;
            messageEl.classList.add('active');
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ
            setTimeout(() => {
                messageEl.classList.remove('active');
            }, 3000);
        }
        
        // ========== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ==========
        function updateVideoInfo() {
            const videoInfo = document.getElementById('videoInfo');
            if (currentVideoFile) {
                const fileSizeMB = (currentVideoFile.size / (1024 * 1024)).toFixed(2);
                const duration = 'N/A';
                videoInfo.innerHTML = `
                    üìè –†–∞–∑–º–µ—Ä: ${fileSizeMB} MB<br>
                    ‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ${duration}<br>
                    üìÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ: —Ç–æ–ª—å–∫–æ —á—Ç–æ
                `;
            } else {
                videoInfo.textContent = '–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∏–¥–µ–æ —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å AR';
            }
        }
        
        function checkDeviceCompatibility() {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const isChrome = /Chrome/.test(navigator.userAgent);
            const isEdge = /Edg/.test(navigator.userAgent);
            
            if (!isMobile) {
                showMessage('üì± –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –¥–ª—è AR', 'info');
            }
            
            if (!isChrome && !isEdge) {
                showMessage('üåê –î–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ AR –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Chrome –∏–ª–∏ Edge', 'warning');
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–∞–º–µ—Ä—ã
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                showMessage('‚ö†Ô∏è –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ', 'warning');
            }
        }
        
        // ========== –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö ==========
        window.addEventListener('error', function(e) {
            console.error('‚ùå –û—à–∏–±–∫–∞:', e.message);
            showMessage('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.', 'error');
        });
        
        // ========== –ê–î–ê–ü–¢–ê–¶–ò–Ø –ö –†–ê–ó–ú–ï–†–ê–ú –≠–ö–†–ê–ù–ê ==========
        window.addEventListener('resize', function() {
            const canvas = document.getElementById('arCanvas');
            if (canvas && isARActive) {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
        });
        
        // ========== –î–ï–ë–ê–ì –ò–ù–§–û–†–ú–ê–¶–ò–Ø ==========
        window.debugApp = function() {
            console.log('=== –î–ï–ë–ê–ì –ò–ù–§–û–†–ú–ê–¶–ò–Ø ===');
            console.log('–¢–µ–∫—É—â–µ–µ –≤–∏–¥–µ–æ:', currentVideoFile ? currentVideoFile.name : '–Ω–µ—Ç');
            console.log('–í–∏–¥–µ–æ URL:', currentVideoUrl ? '–µ—Å—Ç—å' : '–Ω–µ—Ç');
            console.log('AR –∞–∫—Ç–∏–≤–µ–Ω:', isARActive);
            console.log('–ü—Ä–æ—Ç–æ–∫–æ–ª:', window.location.protocol);
            console.log('User Agent:', navigator.userAgent);
            console.log('–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞:', window.innerWidth, 'x', window.innerHeight);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            const elements = ['startAR', 'uploadVideo', 'videoInput', 'previewVideo', 'arCanvas'];
            elements.forEach(id => {
                console.log(id + ':', document.getElementById(id) ? '‚úì –Ω–∞–π–¥–µ–Ω' : '‚úó –ù–ï –ù–ê–ô–î–ï–ù');
            });
        };
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–±–∞–≥ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        setTimeout(() => {
            console.log('‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ');
            console.log('‚ÑπÔ∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ debugApp() –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏');
        }, 1000);
    </script>
</body>
</html>
