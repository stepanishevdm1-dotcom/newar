<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AR Video</title>

<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/ar.js@3.4.5/aframe/build/aframe-ar.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/aframe-gesture-detector@4.0.5/dist/aframe-gesture-detector.min.js"></script>

<style>
body {
  margin: 0;
  overflow: hidden;
  font-family: sans-serif;
}
#ui {
  position: fixed;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  background: rgba(0,0,0,0.6);
  padding: 10px;
  border-radius: 10px;
}
button, input {
  font-size: 16px;
}
</style>
</head>

<body>

<div id="ui">
  <input type="file" accept="video/*" id="videoInput">
</div>

<a-scene
  embedded
  arjs="sourceType: webcam; debugUIEnabled: false;"
  vr-mode-ui="enabled: false"
  gesture-detector
  renderer="logarithmicDepthBuffer: true;"
>

<a-assets>
  <video id="video" loop crossorigin="anonymous" playsinline webkit-playsinline></video>
</a-assets>

<a-entity camera></a-entity>

<a-entity
  id="videoPlane"
  visible="false"
  geometry="primitive: plane; height: 1; width: 1.6"
  material="shader: flat; src: #video"
  position="0 0 -2"
  rotation="0 0 0"
  gesture-handler
></a-entity>

</a-scene>

<script>
const input = document.getElementById("videoInput");
const video = document.getElementById("video");
const plane = document.getElementById("videoPlane");

input.addEventListener("change", () => {
  const file = input.files[0];
  if (!file) return;

  const url = URL.createObjectURL(file);
  video.src = url;
  video.muted = false;
  video.play();

  plane.setAttribute("visible", true);
});
</script>

</body>
</html>
