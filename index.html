<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>AR Video WORKING</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            background: #000;
            font-family: Arial, sans-serif;
        }
        
        #fileInput {
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 10000;
            background: rgba(30, 30, 30, 0.95);
            color: #4CAF50;
            border: 2px solid #4CAF50;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
        }
        
        #videoTime {
            position: fixed;
            top: 15px;
            right: 15px;
            z-index: 10000;
            background: rgba(30, 30, 30, 0.95);
            color: #2196F3;
            padding: 10px 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            font-weight: bold;
            border: 2px solid #2196F3;
        }
        
        #sizeInfo {
            position: fixed;
            bottom: 15px;
            left: 15px;
            z-index: 10000;
            background: rgba(30, 30, 30, 0.95);
            color: #FF9800;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
            border: 2px solid #FF9800;
        }
        
        #soundInfo {
            position: fixed;
            bottom: 60px;
            left: 15px;
            z-index: 10000;
            background: rgba(30, 30, 30, 0.95);
            color: #9C27B0;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
            border: 2px solid #9C27B0;
            cursor: pointer;
        }
        
        .btn-hint {
            position: fixed;
            bottom: 15px;
            right: 15px;
            z-index: 10000;
            background: rgba(30, 30, 30, 0.95);
            color: #E91E63;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            text-align: center;
            border: 2px solid #E91E63;
        }
        
        .arjs-loader {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 18px;
            z-index: 9999;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px 30px;
            border-radius: 10px;
            display: none;
        }
    </style>
</head>
<body>
    <!-- –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ -->
    <input type="file" id="fileInput" accept="video/*">
    <div id="videoTime">00:00 / 00:00</div>
    <div id="sizeInfo">–†–∞–∑–º–µ—Ä: 100%</div>
    <div id="soundInfo" onclick="toggleSound()">üîá –ó–≤—É–∫ –≤—ã–∫–ª—é—á–µ–Ω</div>
    <div class="btn-hint">–ù–∞–≤–µ–¥–∏—Ç–µ –æ—Ä–∞–Ω–∂–µ–≤—ã–π –∫—Ä—É–≥ –Ω–∞ –∫–Ω–æ–ø–∫—É –∏ —É–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ 2 —Å–µ–∫</div>
    <div class="arjs-loader" id="loader">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AR...</div>

    <!-- A-Frame —Å—Ü–µ–Ω–∞ -->
    <a-scene 
        embedded 
        arjs="sourceType: webcam; debugUIEnabled: false;" 
        vr-mode-ui="enabled: false"
        renderer="logarithmicDepthBuffer: true;"
        loading-screen="enabled: false">
        
        <!-- –ö–∞–º–µ—Ä–∞ —Å –∫—É—Ä—Å–æ—Ä–æ–º -->
        <a-entity camera look-controls="enabled: false">
            <a-cursor 
                id="mainCursor"
                fuse="true" 
                fuse-timeout="2000"
                raycaster="objects: .btn-control"
                geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                material="color: #FF9800; shader: flat; opacity: 0.8">
                <a-animation attribute="material.opacity" 
                    from="0.3" to="0.8" dur="1000" 
                    repeat="indefinite" direction="alternate">
                </a-animation>
            </a-cursor>
        </a-entity>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤–∏–¥–µ–æ –∏ –∫–Ω–æ–ø–æ–∫ -->
        <a-entity id="ar-video-container" position="0 1.5 -3" visible="false">
            <!-- –í–∏–¥–µ–æ–ø–ª–æ—Å–∫–æ—Å—Ç—å —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID -->
            <a-video 
                id="ar-video-plane"
                width="2.0"
                height="1.125"
                scale="-1 1 1"
                position="0 0 0"
                material="shader: flat; side: front; transparent: false"
                rotation="0 0 0">
            </a-video>
            
            <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥ –≤–∏–¥–µ–æ -->
            <a-entity id="control-panel" position="0 -0.8 0.05">
                <!-- –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞: –û—Å–Ω–æ–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
                <a-entity class="btn-control" position="-0.75 0.3 0" data-action="play">
                    <a-box color="#2E7D32" width="0.4" height="0.2" depth="0.05"></a-box>
                    <a-text value="‚ñ∂" color="#FFFFFF" align="center" 
                           position="0 0 0.03" scale="0.7 0.7 1" width="2"></a-text>
                </a-entity>
                
                <a-entity class="btn-control" position="-0.25 0.3 0" data-action="pause">
                    <a-box color="#F57C00" width="0.4" height="0.2" depth="0.05"></a-box>
                    <a-text value="‚è∏" color="#FFFFFF" align="center" 
                           position="0 0 0.03" scale="0.7 0.7 1" width="2"></a-text>
                </a-entity>
                
                <a-entity class="btn-control" position="0.25 0.3 0" data-action="rewind">
                    <a-box color="#1565C0" width="0.4" height="0.2" depth="0.05"></a-box>
                    <a-text value="‚Ü∂5s" color="#FFFFFF" align="center" 
                           position="0 0 0.03" scale="0.5 0.5 1" width="2"></a-text>
                </a-entity>
                
                <a-entity class="btn-control" position="0.75 0.3 0" data-action="forward">
                    <a-box color="#1565C0" width="0.4" height="0.2" depth="0.05"></a-box>
                    <a-text value="‚Ü∑5s" color="#FFFFFF" align="center" 
                           position="0 0 0.03" scale="0.5 0.5 1" width="2"></a-text>
                </a-entity>
                
                <!-- –í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–º -->
                <a-entity class="btn-control" position="-0.5 0 0" data-action="smaller">
                    <a-box color="#424242" width="0.4" height="0.2" depth="0.05"></a-box>
                    <a-text value="‚ûñ" color="#FFFFFF" align="center" 
                           position="0 0 0.03" scale="0.7 0.7 1" width="2"></a-text>
                </a-entity>
                
                <a-entity class="btn-control" position="0 0 0" data-action="bigger">
                    <a-box color="#424242" width="0.4" height="0.2" depth="0.05"></a-box>
                    <a-text value="‚ûï" color="#FFFFFF" align="center" 
                           position="0 0 0.03" scale="0.7 0.7 1" width="2"></a-text>
                </a-entity>
                
                <a-entity class="btn-control" position="0.5 0 0" data-action="resetsize">
                    <a-box color="#616161" width="0.4" height="0.2" depth="0.05"></a-box>
                    <a-text value="–°–±—Ä–æ—Å" color="#FFFFFF" align="center" 
                           position="0 0 0.03" scale="0.4 0.4 1" width="2"></a-text>
                </a-entity>
                
                <!-- –¢—Ä–µ—Ç—å—è —Å—Ç—Ä–æ–∫–∞: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤—É–∫–æ–º -->
                <a-entity class="btn-control" position="0 -0.3 0" data-action="togglesound">
                    <a-box color="#7B1FA2" width="0.6" height="0.2" depth="0.05"></a-box>
                    <a-text value="üîä –ó–≤—É–∫" color="#FFFFFF" align="center" 
                           position="0 0 0.03" scale="0.35 0.35 1" width="2"></a-text>
                </a-entity>
            </a-entity>
        </a-entity>
    </a-scene>

    <script>
        // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let videoElement = null;
        let currentScale = 1.0;
        let soundEnabled = false;
        const MIN_SCALE = 0.5;
        const MAX_SCALE = 2.0;
        const SCALE_STEP = 0.25;

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const fileInput = document.getElementById('fileInput');
        const videoTimeDisplay = document.getElementById('videoTime');
        const sizeInfoDisplay = document.getElementById('sizeInfo');
        const soundInfoDisplay = document.getElementById('soundInfo');
        const loader = document.getElementById('loader');
        const videoContainer = document.getElementById('ar-video-container');
        const videoPlane = document.getElementById('ar-video-plane');

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
        function formatTime(seconds) {
            if (isNaN(seconds)) return "00:00";
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
        function updateTimeDisplay() {
            if (!videoElement) return;
            
            const current = videoElement.currentTime;
            const duration = videoElement.duration;
            
            videoTimeDisplay.textContent = `${formatTime(current)} / ${formatTime(duration)}`;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–∞–∑–º–µ—Ä–µ
        function updateSizeDisplay() {
            sizeInfoDisplay.textContent = `–†–∞–∑–º–µ—Ä: ${Math.round(currentScale * 100)}%`;
            videoPlane.setAttribute('width', 2.0 * currentScale);
            videoPlane.setAttribute('height', 1.125 * currentScale);
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–∞
        function toggleSound() {
            if (!videoElement) return;
            
            soundEnabled = !soundEnabled;
            videoElement.muted = !soundEnabled;
            
            if (soundEnabled) {
                soundInfoDisplay.textContent = "üîä –ó–≤—É–∫ –≤–∫–ª—é—á–µ–Ω";
                soundInfoDisplay.style.color = "#4CAF50";
                soundInfoDisplay.style.borderColor = "#4CAF50";
            } else {
                soundInfoDisplay.textContent = "üîá –ó–≤—É–∫ –≤—ã–∫–ª—é—á–µ–Ω";
                soundInfoDisplay.style.color = "#9C27B0";
                soundInfoDisplay.style.borderColor = "#9C27B0";
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('arVideoSoundEnabled', soundEnabled);
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ
        fileInput.addEventListener('change', async function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            console.log("–ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ—Ñ–∞–π–ª–∞:", file.name);
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–≥—Ä—É–∑—á–∏–∫
            loader.style.display = 'block';
            loader.textContent = '–ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ...';
            
            try {
                // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –≤–∏–¥–µ–æ
                if (videoElement) {
                    URL.revokeObjectURL(videoElement.src);
                    if (videoElement.parentNode) {
                        videoElement.parentNode.removeChild(videoElement);
                    }
                }
                
                // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ—ç–ª–µ–º–µ–Ω—Ç–∞
                videoElement = document.createElement('video');
                videoElement.id = 'source-video-' + Date.now();
                videoElement.crossOrigin = 'anonymous';
                videoElement.playsInline = true;
                videoElement.loop = true;
                videoElement.muted = !soundEnabled; // –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–≤—É–∫–∞
                
                // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
                const videoURL = URL.createObjectURL(file);
                videoElement.src = videoURL;
                
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ DOM (—Å–∫—Ä—ã—Ç–æ)
                videoElement.style.display = 'none';
                document.body.appendChild(videoElement);
                
                // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
                await new Promise((resolve, reject) => {
                    videoElement.onloadedmetadata = () => {
                        console.log("–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, —Ä–∞–∑–º–µ—Ä:", 
                            videoElement.videoWidth, "x", videoElement.videoHeight);
                        resolve();
                    };
                    videoElement.onerror = reject;
                    setTimeout(() => reject(new Error("–¢–∞–π–º–∞—É—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ")), 10000);
                });
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏–¥–µ–æ–ø–ª–æ—Å–∫–æ—Å—Ç–∏ –≤ A-Frame
                videoPlane.setAttribute('src', '#' + videoElement.id);
                
                // –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
                videoContainer.setAttribute('visible', 'true');
                
                // –°–±—Ä–æ—Å –º–∞—Å—à—Ç–∞–±–∞
                currentScale = 1.0;
                updateSizeDisplay();
                
                // –ó–∞–ø—É—Å–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
                try {
                    await videoElement.play();
                    console.log("–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –Ω–∞—á–∞—Ç–æ");
                } catch (playErr) {
                    console.log("–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:", playErr.message);
                    // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
                    const playBtn = document.createElement('button');
                    playBtn.textContent = '–ù–∞—á–∞—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ';
                    playBtn.style.cssText = `
                        position: fixed; top: 60px; left: 15px; z-index: 10001;
                        background: #4CAF50; color: white; border: none;
                        padding: 10px 15px; border-radius: 5px; cursor: pointer;
                    `;
                    playBtn.onclick = () => {
                        videoElement.play();
                        document.body.removeChild(playBtn);
                    };
                    document.body.appendChild(playBtn);
                }
                
                // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
                setInterval(updateTimeDisplay, 300);
                
                console.log("–í–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ");
                
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ:", error);
                alert("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ: " + error.message);
            } finally {
                // –°–∫—Ä—ã—Ç—å –∑–∞–≥—Ä—É–∑—á–∏–∫
                loader.style.display = 'none';
            }
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AR.js
        window.addEventListener('load', function() {
            console.log("–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AR...");
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ AR
            loader.style.display = 'block';
            
            // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ A-Frame
            document.querySelector('a-scene').addEventListener('loaded', function() {
                console.log("A-Frame —Å—Ü–µ–Ω–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞");
                loader.style.display = 'none';
                
                // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∑–≤—É–∫–∞ –∏–∑ localStorage
                const savedSound = localStorage.getItem('arVideoSoundEnabled');
                if (savedSound !== null) {
                    soundEnabled = savedSound === 'true';
                    if (videoElement) {
                        videoElement.muted = !soundEnabled;
                    }
                    toggleSound(); // –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                }
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–Ω–æ–ø–æ–∫
                setupButtonHandlers();
            });
        });

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–Ω–æ–ø–æ–∫
        function setupButtonHandlers() {
            console.log("–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–Ω–æ–ø–æ–∫...");
            
            const buttons = document.querySelectorAll('.btn-control');
            console.log("–ù–∞–π–¥–µ–Ω–æ –∫–Ω–æ–ø–æ–∫:", buttons.length);
            
            buttons.forEach(btn => {
                // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
                btn.removeEventListener('fuse', handleButtonClick);
                btn.removeEventListener('click', handleButtonClick);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ fuse
                btn.addEventListener('fuse', handleButtonClick);
                
                // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏: —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
                btn.addEventListener('click', function(e) {
                    console.log("–ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ (–æ—Ç–ª–∞–¥–∫–∞):", this.getAttribute('data-action'));
                    handleButtonClick.call(this, e);
                });
            });
            
            console.log("–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã");
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫
        function handleButtonClick(event) {
            const action = this.getAttribute('data-action');
            console.log("–ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞:", action);
            
            if (!videoElement) {
                console.log("–í–∏–¥–µ–æ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!");
                return;
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞–∂–∞—Ç–∏—è
            const originalScale = this.getAttribute('scale') || '1 1 1';
            this.setAttribute('scale', '0.9 0.9 0.9');
            
            setTimeout(() => {
                this.setAttribute('scale', originalScale);
            }, 200);
            
            // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
            switch(action) {
                case 'play':
                    videoElement.play();
                    console.log("–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ");
                    break;
                    
                case 'pause':
                    videoElement.pause();
                    console.log("–ü–∞—É–∑–∞");
                    break;
                    
                case 'rewind':
                    videoElement.currentTime = Math.max(0, videoElement.currentTime - 5);
                    console.log("–ü–µ—Ä–µ–º–æ—Ç–∫–∞ –Ω–∞–∑–∞–¥ –Ω–∞ 5 —Å–µ–∫");
                    break;
                    
                case 'forward':
                    videoElement.currentTime = Math.min(
                        videoElement.duration || Infinity, 
                        videoElement.currentTime + 5
                    );
                    console.log("–ü–µ—Ä–µ–º–æ—Ç–∫–∞ –≤–ø–µ—Ä–µ–¥ –Ω–∞ 5 —Å–µ–∫");
                    break;
                    
                case 'smaller':
                    currentScale = Math.max(MIN_SCALE, currentScale - SCALE_STEP);
                    updateSizeDisplay();
                    console.log("–£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞:", currentScale);
                    break;
                    
                case 'bigger':
                    currentScale = Math.min(MAX_SCALE, currentScale + SCALE_STEP);
                    updateSizeDisplay();
                    console.log("–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞:", currentScale);
                    break;
                    
                case 'resetsize':
                    currentScale = 1.0;
                    updateSizeDisplay();
                    console.log("–°–±—Ä–æ—Å —Ä–∞–∑–º–µ—Ä–∞");
                    break;
                    
                case 'togglesound':
                    toggleSound();
                    console.log("–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–∞:", soundEnabled);
                    break;
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏—è
            updateTimeDisplay();
        }

        // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
        window.addEventListener('beforeunload', function() {
            if (videoElement && videoElement.src) {
                URL.revokeObjectURL(videoElement.src);
            }
        });

        // –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        console.log("AR –í–∏–¥–µ–æ–ø–ª–µ–µ—Ä –∑–∞–≥—Ä—É–∂–µ–Ω");
        console.log("–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:");
        console.log("1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ");
        console.log("2. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ");
        console.log("3. –ù–∞–≤–µ–¥–∏—Ç–µ –æ—Ä–∞–Ω–∂–µ–≤—ã–π –∫—Ä—É–≥ –Ω–∞ –∫–Ω–æ–ø–∫—É –≤ AR-–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ");
        console.log("4. –£–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –∫—É—Ä—Å–æ—Ä –Ω–∞ –∫–Ω–æ–ø–∫–µ 2 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏");
    </script>
</body>
</html>
